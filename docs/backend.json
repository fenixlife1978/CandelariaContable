{
  "entities": {
    "Income": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Income",
      "type": "object",
      "description": "Represents an income record from a loan.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the income record."
        },
        "date": {
          "type": "string",
          "description": "Date of the income.",
          "format": "date-time"
        },
        "amount": {
          "type": "number",
          "description": "Amount of the income."
        },
        "description": {
          "type": "string",
          "description": "Description of the income."
        },
        "category": {
          "type": "string",
          "description": "Category of the transaction."
        }
      },
      "required": [
        "id",
        "date",
        "amount",
        "description",
        "category"
      ]
    },
    "Expense": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Expense",
      "type": "object",
      "description": "Represents an expense record related to a loan.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the expense record."
        },
        "date": {
          "type": "string",
          "description": "Date of the expense.",
          "format": "date-time"
        },
        "amount": {
          "type": "number",
          "description": "Amount of the expense."
        },
        "description": {
          "type": "string",
          "description": "Description of the expense."
        },
        "category": {
          "type": "string",
          "description": "Category of the transaction."
        }
      },
      "required": [
        "id",
        "date",
        "amount",
        "description",
        "category"
      ]
    },
    "LoanSummary": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "LoanSummary",
      "type": "object",
      "description": "Represents a monthly loan summary generated by AI.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the loan summary."
        },
        "month": {
          "type": "string",
          "description": "The month the summary is for.",
          "format": "date-time"
        },
        "summary": {
          "type": "string",
          "description": "The AI-generated summary of the loan's performance for the month."
        },
        "suggestions": {
          "type": "string",
          "description": "AI-driven suggestions to improve cash flow."
        }
      },
      "required": [
        "id",
        "month",
        "summary",
        "suggestions"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/incomes/{incomeId}",
        "definition": {
          "entityName": "Income",
          "schema": {
            "$ref": "#/backend/entities/Income"
          },
          "description": "Stores income records for all users. Authenticated users have full read/write access.",
          "params": [
            {
              "name": "incomeId",
              "description": "Unique identifier for the income record."
            }
          ]
        }
      },
      {
        "path": "/expenses/{expenseId}",
        "definition": {
          "entityName": "Expense",
          "schema": {
            "$ref": "#/backend/entities/Expense"
          },
          "description": "Stores expense records for all users. Authenticated users have full read/write access.",
          "params": [
            {
              "name": "expenseId",
              "description": "Unique identifier for the expense record."
            }
          ]
        }
      },
      {
        "path": "/loanSummaries/{loanSummaryId}",
        "definition": {
          "entityName": "LoanSummary",
          "schema": {
            "$ref": "#/backend/entities/LoanSummary"
          },
          "description": "Stores monthly loan summaries generated by AI for all users. Authenticated users have full read/write access.",
          "params": [
            {
              "name": "loanSummaryId",
              "description": "Unique identifier for the loan summary."
            }
          ]
        }
      }
    ],
    "reasoning": "Given the requirement for authenticated users to have universal read, write, and list permissions across the database, and the need to track income, expenses, and generate loan summaries, the structure will prioritize simplicity and ease of access.  Since there are no restrictions, authorization independence is not a concern, and we don't need to denormalize data for security purposes. The data structure is designed to be flat and easily queryable.\n\nAll data will be stored at the top level, grouped by entity type. This straightforward approach facilitates easy querying and manipulation of data, aligning with the requirement for unrestricted access for authenticated users. This structure also fulfills the QAP requirement as it allows listing of every document without the need for complex security rules or filtering."
  }
}
